
<!--
	Development build version: 0.1
	Build date: 02/03/2023
	Author: Bsc Team Project Group 2023
-->

<!DOCTYPE html>
<html>
  
  <head>
	
	<!-- META TAGS START-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- META TAGS END-->

	<!-- EXTERNAL JAVASCRIPT START -->
	<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
	<script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
	<script src="classes/hotpoints.js"></script>
	<script src="classes/menus.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
	<!-- EXTERNAL JAVASCRIPT END -->

	<!-- EXTERNAL CSS START -->
	<link rel="stylesheet" href="css/style.css">
	<!-- EXTERNAL CSS END -->

  </head>

  <body>
	
	<div id="embeddedScene">
		<a-scene embedded >

			<!-- ASSESTS START-->
			<img id="hotpoint" src="img/Points/move_03.png"/> <!-- 600x600 PIXELS-->
			<img id="informationpoint" src="#"/> <!-- 600x600 PIXELS-->
			<!-- ASSESTS END-->

			<!-- A-SKY START-->
			<a-sky id="img-360" src=""></a-sky>
			<!-- A-SKY END-->

			<!-- CAMERA START-->
			<a-camera id="camera" position="0 1.6 0" look-controls camera>
				<a-entity id="cursor" cursor="fuse: true; fuseTimeout: 500" position="0 0 -1" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" material="color: black; shader: flat">
				</a-entity>
			</a-camera>
			<!-- CAMERA END-->

			<!-- OCULUS TOUCH-CONTROLS START -->
			<a-entity laser-controls="hand: right"></a-entity>
			<!-- OCULUS TOUCH-CONTROLS END -->

			<!-- HOTPOINT NAVIGATION START-->
			<a-entity id="blocks" hotpoints></a-entity>
			<!-- HOTPOINT NAVIGATION END-->

		</a-scene>

	</div>
	
	<script>
		function getData(location) {
			$.ajax({
				url: "/requestdata",
				type: "get",
				data: {loc: location},
			})
			.done(function(json) {
				const root = document.getElementById("blocks");
				root.innerHTML = "";

				const data = JSON.parse(json);

				const sky = document.getElementById("img-360");
				$(sky).attr("src", data.img);

				for (var i = 0; i < data.hpImg.length; i++) {
					const hotpoint = document.createElement("a-image");
					$(hotpoint).attr("src", "#hotpoint");
					$(hotpoint).attr("hotpoint", "room:" + data.hpImg[i]);
					$(hotpoint).attr("position", data.hpPos[i]);
					$(hotpoint).attr("rotation", data.hpRot[i]);
					$(hotpoint).attr("scale", "5 5 5");

					root.appendChild(hotpoint);
				}

				/*for (var i = 0; i < data.infoTitle.length; i++) {
					// Ask Paul how he plans to display each info point in VR.
				}*/
			});
		}

		getData("img/Front-Entrance/GS__0107.JPG");
	</script>

  </body>
</html>
